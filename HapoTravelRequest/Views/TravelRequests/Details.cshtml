@model HapoTravelRequest.Models.TravelRequest.TravelRequestReadOnlyVM

@{
    ViewData["Title"] = "Travel Request Details";
}

<h2 class="page-title">Travel Request Details</h2>

<div class="container">
    <!-- Employee Information -->
    <div class="section">
        <div class="section-header">Employee Information</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>First Name:</strong> @Model.FirstName</div>
                <div class="info-item"><strong>Last Name:</strong> @Model.LastName</div>
                <div class="info-item"><strong>Date of Birth:</strong> @Model.DateOfBirth.ToShortDateString()</div>
                <div class="info-item"><strong>Phone Number:</strong> @Model.PhoneNumber</div>
            </div>
            <div class="col-md-6">
                <div class="info-item"><strong>Department:</strong> @Model.Department</div>
                <div class="info-item"><strong>Position Title:</strong> @Model.PositionTitle</div>
                <div class="info-item"><strong>Department Director:</strong> @Model.DepartmentDirector</div>
            </div>
        </div>
    </div>

    <!-- Conference Info -->
    <div class="section">
        <div class="section-header">Conference Information</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>Purpose of Travel:</strong> @Model.PurposeOfTravel</div>
                <div class="info-item"><strong>Conference Description:</strong> @Model.ConferenceDescription</div>
                <div class="info-item"><strong>Conference Link:</strong> @Model.ConferenceLink</div>
                <div class="info-item"><strong>Alternative Text:</strong> @Model.AlternativeText</div>
                <div class="info-item"><strong>Location:</strong> @Model.Location</div>
                <div class="info-item"><strong>Cost:</strong> @(Model.CostOfConference.HasValue ? $"${Model.CostOfConference.Value.ToString("0.00")}" : "Unknown")</div>
            </div>
            <div class="col-md-6">
                <div class="info-item"><strong>Conference Start:</strong> @Model.ConferenceStartDate.ToShortDateString()</div>
                <div class="info-item"><strong>Conference End:</strong> @Model.ConferenceEndDate.ToShortDateString()</div>
                <div class="info-item"><strong>Registration Deadline:</strong> @Model.RegistrationDeadline?.ToShortDateString()</div>
                <div class="info-item"><strong>Departure Date:</strong> @Model.DepartureDate?.ToShortDateString()</div>
                <div class="info-item"><strong>Return Date:</strong> @Model.ReturnDate?.ToShortDateString()</div>
                <div class="info-item"><strong>Registered:</strong> @(Model.Registered ? "Yes" : "No")</div>
                <div class="info-item"><strong>Registered for Conference:</strong> @(Model.RegisteredForConference ? "Yes" : "No")</div>
            </div>
            <div class="col-12">
                <div class="info-item"><strong>Value Explanation:</strong> @Model.ValueExplanation</div>
            </div>
        </div>
    </div>

    <!-- Attendees Info -->
    <div class="section">
        <div class="section-header">Attendees Information</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>Non-Employee Guests:</strong> @(Model.NonEmployeeGuests ? "Yes" : "No")</div>
                <div class="info-item"><strong>Non-Employee Name:</strong> @Model.NonEmployeeLegalName</div>
                <div class="info-item"><strong>Non-Employee DOB:</strong> @Model.NonEmployeeDOB?.ToShortDateString()</div>
            </div>
            <div class="col-md-6">
                <div class="info-item"><strong>Employees Attending:</strong> @Model.EmployeesAttending</div>
                <div class="info-item"><strong>Employee Names:</strong> @Model.EmployeesAttendingNames</div>
            </div>
        </div>
    </div>

    <!-- Accommodations -->
    <div class="section">
        <div class="section-header">Accommodations</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>Conference Hotel:</strong> @Model.ConferenceHotelName</div>
                <div class="info-item"><strong>Preferred Lodging Info:</strong> @Model.PreferredLodgingInfo</div>
                <div class="info-item"><strong>Special Travel Request:</strong> @Model.SpecialTravelRequest</div>
            </div>
        </div>
    </div>

    <!-- Transportation -->
    <div class="section">
        <div class="section-header">Transportation</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>Transportation Mode:</strong> @Model.TransportationMode</div>
                <div class="info-item"><strong>Airline Details:</strong> @Model.AirlineDetails</div>
                <div class="info-item"><strong>Flight Cost:</strong> $@Model.FlightCost</div>
                <div class="info-item"><strong>Ground Transportation:</strong> @Model.GroundTransportation</div>
                <div class="info-item"><strong>Ground Options:</strong> @Model.GroundOptions</div>
                <div class="info-item"><strong>TSA Number:</strong> @Model.TSANumber</div>
            </div>
        </div>
    </div>

    <!-- Reimbursements -->
    <div class="section">
        <div class="section-header">Reimbursements</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>Mileage Reimbursement:</strong> @(Model.MileageReimbursement ? "Yes" : "No")</div>
                <div class="info-item"><strong>Round Trip Miles:</strong> @Model.MileageRoundTrip</div>
                <div class="info-item"><strong>Meals & Incidentals:</strong> @(Model.MIE ? "Yes" : "No")</div>
                <div class="info-item"><strong>Daily MIE Amount:</strong> $@Model.DailyMIEAmount</div>
                <div class="info-item"><strong>Days for MIE:</strong> @Model.DaysForMIE</div>
                <div class="info-item"><strong>Deposit Account:</strong> @Model.DepositAccount</div>
                <div class="info-item"><strong>Account Type:</strong> @Model.AccountType</div>
                <div class="info-item"><strong>Corporate Card:</strong> @(Model.CorporateCard ? "Yes" : "No")</div>
            </div>
        </div>
    </div>

    <!-- Emergency Contact -->
    <div class="section">
        <div class="section-header">Emergency Contact</div>
        <div class="row">
            <div class="col-md-6">
                <div class="info-item"><strong>Contact Name:</strong> @Model.EmergencyContactName</div>
                <div class="info-item"><strong>Contact Phone:</strong> @Model.EmergencyContactPhoneNumber</div>
            </div>
        </div>
    </div>

    <!-- Comments -->
    <div class="section">
        <div class="section-header">Comments</div>
        <div class="row justify-content-center mb-5">
            <div class="col-md-8">
                <div id="comments-container">
                    @* div for comments *@
                </div>
            </div>
        </div>
    </div>

    <input type="hidden" id="travelRequestId" name="Id" value="@Model.Id" />
</div>

@section Scripts {
    <script>
        function loadComments() {
            var travelRequestId = $('input[name="Id"]').val();
            $.get('@Url.Action("GetComments", "TravelRequests")', { id: travelRequestId }, function (data) {
                $('#comments-container').hide().html(data).fadeIn(400);
            });
        }

        $(document).ready(function () {
            loadComments();

            $('#add-comment-form').submit(function (e) {
                e.preventDefault();
                var form = $(this);

                $.post(form.attr('action'), form.serialize(), function () {
                    form[0].reset();
                    loadComments();
                });
            });
        });
    </script>
}

<style>
    .section {
        margin-bottom: 2rem;
        padding: 1rem;
        border: 1px solid #ddd;
        border-radius: 10px;
        background: #f9f9f9;
    }

    .section-header {
        background-color: #FFDC32;
        color: #212529;
        padding: 0.5rem 1rem;
        border-radius: 5px;
        font-weight: bold;
        margin-bottom: 1rem;
        font-size: 1.3rem;
    }

    .info-item {
        margin-bottom: 0.75rem;
    }

    .page-title {
        font-size: 2rem;
        font-weight: bold;
        margin-bottom: 1rem;
    }
</style>
